<article [class]="classes" (click)="onCardClick($event)">
  
  <!-- Custom Shape - 完全自定義 -->
  @if (isCustom()) {
    <ng-content></ng-content>
  }
  
  <!-- Standard Shapes -->
  @else {
    <!-- Header -->
    @if (data()?.header) {
      <div class="gx-card-header">
        @if (data()!.header!.avatar?.src) {
          <img class="gx-card-avatar"
               [src]="data()!.header!.avatar!.src"
               [alt]="data()!.header!.avatar!.alt || ''" />
        }
        
        <div class="gx-card-header-info">
          @if (data()!.header!.title) {
            <h3 class="gx-card-title">{{ data()!.header!.title }}</h3>
          }
          @if (data()!.header!.subtitle && !isCompact()) {
            <p class="gx-card-subtitle">{{ data()!.header!.subtitle }}</p>
          }
        </div>
      </div>
    }

    <!-- Content -->
    <div class="gx-card-content">
      @if (data()?.content?.image?.src && !isCompact()) {
        <img class="gx-card-media"
             [src]="data()!.content!.image!.src"
             [alt]="data()!.content!.image!.alt || ''" />
      }
      
      @if (data()?.content?.title) {
        <h4 class="gx-card-content-title">{{ data()!.content!.title }}</h4>
      }
      
      @if (data()?.content?.description && !isCompact()) {
        <p class="gx-card-description">{{ data()!.content!.description }}</p>
      }
      
      @if (data()?.content?.tags && !isCompact()) {
        <div class="gx-card-tags">
          @for (tag of data()!.content!.tags; track tag.id) {
            <div class="gx-tag-container">
              <gx-button
                [variant]="'tag'"
                [intent]="tag.intent ?? 'info'"
                [disabled]="tag.disabled ?? false"
                (pressed)="onTagClick(tag, $event)">
                {{ tag.label }}
              </gx-button>
              @if (tag.removable ?? false) {
                <button
                  class="gx-tag-remove"
                  type="button"
                  [disabled]="tag.disabled ?? false"
                  (click)="onTagRemove(tag)"
                  aria-label="Remove tag">
                  ×
                </button>
              }
            </div>
          }
        </div>
      }
      
      <ng-content></ng-content>
    </div>

    <!-- Footer -->
    @if (data()?.footer?.actions?.length) {
      <div class="gx-card-footer">
        <div class="gx-card-actions">
          @for (action of data()!.footer!.actions; track action.id) {
            @if (!isCompact() || $index === 0) {
              <gx-button
                [variant]="'filled'"
                [intent]="mapIntent(action.intent)"
                [disabled]="action.disabled ?? false"
                (pressed)="onActionPressed(action, $event)">
                {{ action.label }}
              </gx-button>
            }
          }
        </div>
      </div>
    }
  }
</article>